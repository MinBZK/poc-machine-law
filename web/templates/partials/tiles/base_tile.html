{% from "macros/logos.html" import org_logo %}

<div class="law-result-card min-h-64 bg-white rounded-lg shadow">
    {% if error %}
    <div class="p-6">
        <div class="flex items-start justify-between">
            <div>
                <h3 class="text-lg font-semibold text-gray-900 mb-2">
                    {{ rule_spec.name }}
                </h3>
                <p class="text-red-600">Er is een fout opgetreden bij het berekenen</p>
            </div>
            <div class="p-2">{{ org_logo(service) }}</div>
        </div>
    </div>

    {% elif requirements_met %}
    <div class="p-6 flex flex-col h-full">
        <div class="flex-grow">
            <div class="flex items-start justify-between">
                <h3 class="text-lg font-semibold text-gray-900">
                    {{ rule_spec.name }}
                </h3>
                <div class="-mt-2 -mr-2">{{ org_logo(service) }}</div>
            </div>

            {% if current_claim %}
            <div class="mb-4">
                {% include "partials/tiles/components/claim_status_badge.html" %}
            </div>
            {% endif %}

            {% block tile_content %}{% endblock %}
        </div>

        <div class="mt-6">
            {% block actions %}
                {% if not current_claim %}
                    {% block submit_button %}
                    <button
                        hx-post="/laws/submit-claim?service={{ service }}&law={{ law|urlencode }}&bsn={{ bsn }}"
                        hx-target="closest div.law-result-card"
                        class="w-full px-6 py-3 bg-blue-600 text-white text-center rounded-md hover:bg-blue-700 transition-colors">
                        Aanvragen
                    </button>
                    {% endblock %}
                {% elif current_claim.status.value == 'SUBMITTED' %}
                    {% block submitted_status %}
                    <p class="text-sm text-gray-600 text-center">Uw aanvraag wordt beoordeeld</p>
                    {% endblock %}
                {% elif current_claim.status.value == 'APPROVED' %}
                    {% block approved_status %}
                    <p class="text-sm text-green-600 text-center">Uw aanvraag is goedgekeurd</p>
                    {% endblock %}
                {% elif current_claim.status.value == 'DENIED' and current_claim.can_appeal() %}
                    {% block appeal_button %}
                    <button
                        hx-post="/laws/submit-appeal?claim_id={{ current_claim.id }}"
                        hx-target="closest div.min-h-[16rem]"
                        class="w-full px-6 py-3 bg-red-600 text-white text-center rounded-md hover:bg-red-700 transition-colors">
                        In bezwaar gaan
                    </button>
                    {% endblock %}
                {% endif %}
            {% endblock %}
        </div>
    </div>

    {% else %}
    <div class="p-6">
        <div class="flex items-start justify-between">
            <div>
                <h3 class="text-lg font-semibold text-gray-900 mb-2">
                    {{ rule_spec.name }}
                </h3>
                <p class="text-gray-600">
                    U komt niet in aanmerking
                </p>
            </div>
            <div class="-mt-2 -mr-2">{{ org_logo(service) }}</div>
        </div>
    </div>
    {% endif %}
</div>
